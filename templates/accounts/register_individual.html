{% extends "base.html" %}

{% block title %}تسجيل الأفراد | ثقف{% endblock %}

{% block content %}
<main class="wrap" style="padding:26px 0;max-width:900px">

  <div style="
    --brand:#5a3a1e;
    --text:#0f172a;
    --muted:#667085;
    --border:#e1c6a6;
    --soft:#f6ede2;
    --danger:#b42318;
    --shadow: 0 14px 34px rgba(90,58,30,.12);
  ">

    <header style="margin-bottom:14px">
      <h1 style="margin:0;font-size:22px;font-weight:900;color:var(--text);letter-spacing:.2px">
        تسجيل الأفراد
      </h1>
      <div style="margin-top:6px;color:var(--muted);line-height:1.8">
        سيتم إرسال <b>رمز تحقق</b> إلى البريد الإلكتروني لتفعيل الحساب.
      </div>
    </header>

    {% if messages %}
      <div style="margin:12px 0;display:grid;gap:8px">
        {% for message in messages %}
          <div style="padding:10px 12px;border-radius:12px;border:1px solid #eef2f6;background:#fff;color:var(--text)">
            {{ message }}
          </div>
        {% endfor %}
      </div>
    {% endif %}

    <form method="post" novalidate style="
      border:1px solid var(--border);
      border-radius:18px;
      padding:18px;
      background:#fff;
      box-shadow: var(--shadow);
    ">
      {% csrf_token %}

      {% if form.non_field_errors %}
        <div style="
          padding:10px 12px;
          border-radius:12px;
          border:1px solid rgba(180,35,24,.25);
          background: rgba(180,35,24,.06);
          color: var(--danger);
          margin-bottom:12px;
          line-height:1.8;
        ">
          {{ form.non_field_errors }}
        </div>
      {% endif %}

      <!-- Section: Personal Info -->
      <section style="padding:14px;border:1px solid #f2e5d5;border-radius:16px;background:var(--soft);margin-bottom:12px">
        <div style="font-weight:900;color:var(--brand);margin-bottom:10px">البيانات الشخصية</div>

        <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:12px">
          <div>
            <label style="display:block;margin-bottom:7px;font-weight:800;color:var(--text)">{{ form.full_name.label }}</label>
            {{ form.full_name }}
            {% if form.full_name.errors %}<div style="margin-top:6px;color:var(--danger)">{{ form.full_name.errors }}</div>{% endif %}
          </div>

          <div>
            <label style="display:block;margin-bottom:7px;font-weight:800;color:var(--text)">{{ form.id_number.label }}</label>
            {{ form.id_number }}
            {% if form.id_number.errors %}<div style="margin-top:6px;color:var(--danger)">{{ form.id_number.errors }}</div>{% endif %}
          </div>
        </div>
      </section>

      <!-- Section: Contact -->
      <section style="padding:14px;border:1px solid #f2e5d5;border-radius:16px;background:#fff;margin-bottom:12px">
        <div style="font-weight:900;color:var(--brand);margin-bottom:10px">بيانات التواصل</div>

        <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:12px">
          <div>
            <label style="display:block;margin-bottom:7px;font-weight:800;color:var(--text)">{{ form.email.label }}</label>
            {{ form.email }}
            {% if form.email.errors %}<div style="margin-top:6px;color:var(--danger)">{{ form.email.errors }}</div>{% endif %}
            <div style="margin-top:6px;color:var(--muted);font-size:13px;line-height:1.7">
              سيتم إرسال رمز التفعيل إلى هذا البريد.
            </div>
          </div>

          <div>
            <label style="display:block;margin-bottom:7px;font-weight:800;color:var(--text)">{{ form.phone.label }}</label>
            {{ form.phone }}
            {% if form.phone.help_text %}
              <div style="margin-top:6px;color:var(--muted);font-size:13px">{{ form.phone.help_text }}</div>
            {% endif %}
            {% if form.phone.errors %}<div style="margin-top:6px;color:var(--danger)">{{ form.phone.errors }}</div>{% endif %}
          </div>
        </div>
      </section>

      <!-- Section: Password -->
      <section style="padding:14px;border:1px solid #f2e5d5;border-radius:16px;background:var(--soft)">
        <div style="font-weight:900;color:var(--brand);margin-bottom:10px">بيانات الدخول</div>

        <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:12px">
          <div>
            <label style="display:block;margin-bottom:7px;font-weight:800;color:var(--text)">{{ form.password1.label }}</label>
            {{ form.password1 }}
            {% if form.password1.errors %}<div style="margin-top:6px;color:var(--danger)">{{ form.password1.errors }}</div>{% endif %}
          </div>

          <div>
            <label style="display:block;margin-bottom:7px;font-weight:800;color:var(--text)">{{ form.password2.label }}</label>
            {{ form.password2 }}
            {% if form.password2.errors %}<div style="margin-top:6px;color:var(--danger)">{{ form.password2.errors }}</div>{% endif %}
          </div>
        </div>

        <button type="submit" style="
          margin-top:14px;
          width:100%;
          padding:12px 14px;
          border-radius:14px;
          border:1px solid rgba(90,58,30,.18);
          background: linear-gradient(180deg, rgba(90,58,30,.96), rgba(90,58,30,.88));
          color:#fff;
          font-weight:900;
          cursor:pointer;
          letter-spacing:.2px;
        ">
          إنشاء الحساب
        </button>

        <div style="margin-top:12px;color:var(--muted)">
          لديك حساب؟ <a href="{% url 'accounts:login' %}" style="color:var(--brand);font-weight:900;text-decoration:none">تسجيل الدخول</a>
        </div>
      </section>

    </form>
  </div>
</main>
{% endblock %}
